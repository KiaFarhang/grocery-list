"use strict";function constructList(){var e=new XMLHttpRequest;e.open("GET","./list.json"),e.addEventListener("load",function(){list=JSON.parse(e.responseText);for(var t in list)addItemToPage(constructItem(list[t],t))}),e.send()}function constructItem(e,t){var n=document.createElement("div");n.classList.add("item"),n.id=t;var r=document.createElement("p");r.innerText=e;var i=document.createElement("button");return i.addEventListener("click",removeItem),i.innerText="X",n.appendChild(r),n.appendChild(i),n}function addItemToPage(e){container.appendChild(e)}function removeItem(e){var t=e.target.parentElement.id;removeItemFromList(t),container.removeChild(e.target.parentElement)}function removeItemFromList(e){delete list[e],sendListToServer()}function sendListToServer(){var e=new XMLHttpRequest;e.open("POST","./list.json"),e.setRequestHeader("LIST",JSON.stringify(list)),e.send()}function addItem(e){if(13==e.which||13==e.keyCode){do var t=randomNumber();while(list.hasOwnProperty(t));addItemToPage(constructItem(e.target.value,t)),list[t]=e.target.value,sendListToServer(),e.target.value=""}}function inputListener(){document.getElementById("addItem").addEventListener("keydown",addItem)}function randomNumber(){return Math.floor(1e3*Math.random())}document.addEventListener("DOMContentLoaded",inputListener);var container=document.getElementById("container"),list;constructList();